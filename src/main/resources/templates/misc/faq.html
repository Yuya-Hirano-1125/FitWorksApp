<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>よくある質問 | FitWorks</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/base.css}">
    <link rel="stylesheet" th:href="@{/css/settings.css}">
    <link rel="stylesheet" th:href="@{/css/faq-styles.css}">
	
	<script th:src="@{/js/theme.js}"></script>
</head>
<body class="settings-page">
<div class="main-container">
    <h1><i class="fa-solid fa-list-check header-icon"></i>よくある質問 (FAQ)</h1>
    
    <div class="setting-section" style="--section-index: 1;">
	    <div class="section-header" onclick="toggleSection('home-content')">
	        <div>
	            <span class="section-icon"><i class="fa-solid fa-house"></i></span> ホーム画面について
	        </div>
	        <span class="arrow">▼</span>
	    </div>
	    
	    <div class="section-content" id="home-content">
	        <div class="faq-item">
	            <p class="faq-question">今日の目標は何を基準に表示されますか？</p>
	            <p class="faq-answer">過去のトレーニング実績と、AIコーチが設定した週間目標に基づき、自動で生成・表示されます。</p>
	        </div>
	        <div class="faq-item">
	            <p class="faq-question">ウィジェットに表示される消費カロリーは正確ですか？</p>
	            <p class="faq-answer">入力された体重、身長、性別と、運動時の心拍数データ（連携時）に基づいて計算されます。医学的なものではなく、あくまで目安としてご利用ください。</p>
	        </div>
	    </div>
	</div>

    <div class="setting-section" style="--section-index: 2;">
        <div class="section-header" onclick="toggleSection('training-content')">
            <div><span class="section-icon"><i class="fa-solid fa-dumbbell"></i></span> トレーニング画面について</div>
            <span class="arrow">▼</span>
        </div>
        
        <div class="section-content" id="training-content">
            <div class="faq-item">
                <p class="faq-question">カスタムトレーニングの作り方を教えてください。</p>
                <p class="faq-answer">トレーニング画面右上の「＋」ボタンから「カスタム作成」を選択し、種目、回数、セット数、休憩時間を自由に設定できます。</p>
            </div>
            <div class="faq-item">
                <p class="faq-question">トレーニング中にアプリが落ちてしまいました。記録は残りますか？</p>
                <p class="faq-answer">各セットが完了するたびに自動で進捗が保存されます。直前に完了したセットまでの記録は残りますのでご安心ください。</p>
            </div>
        </div>
    </div>

    <div class="setting-section" style="--section-index: 3;">
        <div class="section-header" onclick="toggleSection('record-content')">
            <div><span class="section-icon"><i class="fa-solid fa-chart-line"></i></span> トレーニング記録画面について</div>
            <span class="arrow">▼</span>
        </div>
        
        <div class="section-content" id="record-content">
            <div class="faq-item">
                <p class="faq-question">記録したトレーニングを修正したいです。</p>
                <p class="faq-answer">記録画面で修正したい履歴を選択し、画面右上の編集アイコン（鉛筆マーク）をタップすることで、種目や回数を修正できます。</p>
            </div>
            <div class="faq-item">
                <p class="faq-question">グラフの「推定最大挙上重量（1RM）」とは何ですか？</p>
                <p class="faq-answer">1回だけ持ち上げられると推定される最大の重さ（One-Repetition Maximum）のことです。筋力の向上を測る重要な指標です。</p>
            </div>
        </div>
    </div>

    <div class="setting-section" style="--section-index: 4;">
        <div class="section-header" onclick="toggleSection('mission-content')">
            <div><span class="section-icon"><i class="fa-solid fa-list-check"></i></span> デイリーミッション画面について</div>
            <span class="arrow">▼</span>
        </div>
        <div class="section-content" id="mission-content">
            <div class="faq-item">
                <p class="faq-question">ミッションが達成できないのですが、スキップできますか？</p>
                <p class="faq-answer">ミッションは1日1回、無料で別のミッションに更新（リロール）することができます。画面上部のリフレッシュボタンをご利用ください。</p>
            </div>
            <div class="faq-item">
                <p class="faq-question">ミッション達成の報酬（コイン）は何に使えますか？</p>
                <p class="faq-answer">デイリーミッションや週間チャレンジで獲得したコインは、ガチャ画面でのアイテム獲得に使用できます。</p>
            </div>
        </div>
    </div>

    <div class="setting-section" style="--section-index: 5;">
        <div class="section-header" onclick="toggleSection('gacha-content')">
            <div><span class="section-icon"><i class="fa-solid fa-box-open"></i></span> ガチャ画面について</div>
            <span class="arrow">▼</span>
        </div>
 
        <div class="section-content" id="gacha-content">
            <div class="faq-item">
                <p class="faq-question">レア度の高いアイテムは何に役立ちますか？</p>
                <p class="faq-answer">レア度の高いアイテムは、トレーニング記録画面での称号や、AIコーチによる特別なフィードバック機能の解放などに利用されます。</p>
            </div>
            <div class="faq-item">
                <p class="faq-question">ガチャの提供割合を知りたいです。</p>
                <p class="faq-answer">ガチャ画面の右下にある「提供割合」ボタンから、各アイテムの出現率を確認できます。</p>
            </div>
        </div>
    </div>
    
    <div class="button-container" style="margin-top: 40px;">
        <a th:href="@{/home}" class="button secondary">
            ホームに戻る <i class="fa-solid fa-house"></i>
        </a>
    </div>
</div>

<script>
    function toggleSection(contentId) {
        const content = document.getElementById(contentId);
        // section-header は content の一つ上の要素 (setting-section) の最初の子要素
        const sectionHeader = content.previousElementSibling; 
        const arrow = sectionHeader.querySelector('.arrow');
        
        // セクションが閉じているかチェック (maxHeightが0または空文字列の場合)
        if (content.style.maxHeight && content.style.maxHeight !== '0px') {
            // CLOSING (閉じる)
            content.style.maxHeight = '0px';
            content.style.paddingTop = '0px';
            content.style.paddingBottom = '0px';
            arrow.innerHTML = '▼';
            
            // アニメーション完了後にdisplay: noneを設定
            // CSSのtransition時間(0.3s)と一致させる
            setTimeout(() => {
                 content.style.display = 'none';
            }, 300); 
            
        } else {
            // OPENING (開く)
            // display: block に設定しないと scrollHeight が計算できない
            content.style.display = 'block'; 
            
            // scrollHeight を使用してコンテンツの高さに合わせる
            // +30px は paddingTop(10px) + paddingBottom(15px) + 余裕(5px) のため
            content.style.maxHeight = content.scrollHeight + 30 + "px"; 
            content.style.paddingTop = '10px';
            content.style.paddingBottom = '15px';
            arrow.innerHTML = '▲';
        }
    }

    // ページロード時の初期設定
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('.setting-section').forEach(section => {
            const content = section.querySelector('.section-content');
            const arrow = section.querySelector('.arrow');
            
            // 強制的に初期状態を非表示に設定
            content.style.maxHeight = '0px';
            content.style.paddingTop = '0px';
            content.style.paddingBottom = '0px';
            content.style.display = 'none'; // DOMからも非表示にする
            
            // 矢印の向きを設定
            if (arrow) {
                arrow.innerHTML = '▼';
            }
        });
    });
</script>
</body>
</html>